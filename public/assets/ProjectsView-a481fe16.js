import{_ as f,u as $}from"./_plugin-vue_export-helper-81752afc.js";import{u as N,c as _,o as U,r as x,a as n,b as r,d as s,e as l,w as d,f as u,t as c,F as I,g as F,h as S}from"./index-2a4a3604.js";const T={class:"project-list"},Y={class:"list-header"},B={key:0,class:"loading-state"},E={key:1,class:"alert alert-danger"},M={key:2,class:"empty-state"},R={key:3,class:"project-grid"},A=["onClick"],q=["src","alt"],z={key:1,class:"default-thumbnail"},G={key:0,class:"no-video-text"},H={class:"project-header"},J={class:"project-title"},K={class:"project-date"},O={class:"project-content"},Q={class:"project-description"},W={class:"project-stats"},X={class:"project-actions"},Z=["onClick"],tt={__name:"ProjectList",setup(h){const i=$(),p=N(),m=_(()=>i.sortedProjects),j=_(()=>i.loading),v=_(()=>i.error),g=t=>{p.push(`/projects/${t}/view`)},P=t=>t?t.includes("youtube.com")||t.includes("youtu.be"):!1,k=t=>{if(!t)return"";let e="";if(t.includes("youtu.be"))e=t.split("/").pop().split("?")[0];else if(t.includes("youtube.com/watch"))try{e=new URL(t).searchParams.get("v")}catch{return""}return e?`https://img.youtube.com/vi/${e}/hqdefault.jpg`:""},b=async()=>{await i.fetchProjects()},w=t=>{if(!t||!t._id){console.error("Cannot delete project: Invalid project or missing ID");return}confirm(`Are you sure you want to delete project "${t.name}"? This action cannot be undone.`)&&C(t._id)},C=async t=>{if(!t){console.error("Cannot delete project: Missing ID");return}try{await i.removeProject(t)}catch(e){console.error("Failed to delete project:",e)}},D=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",L=(t,e=100)=>t?t.length<=e?t:t.substring(0,e)+"...":"No description";return U(()=>{b()}),(t,e)=>{const a=x("router-link");return n(),r("div",T,[s("div",Y,[e[1]||(e[1]=s("h1",null,"My Language Learning Projects",-1)),l(a,{to:"/projects/new",class:"btn btn-primary"},{default:d(()=>e[0]||(e[0]=[u(" Create New Project ")])),_:1})]),j.value?(n(),r("div",B,e[2]||(e[2]=[s("p",null,"Loading...",-1)]))):v.value?(n(),r("div",E,[s("p",null,c(v.value),1),s("button",{onClick:b,class:"btn btn-primary btn-sm mt-2"}," Retry ")])):m.value.length===0?(n(),r("div",M,[e[4]||(e[4]=s("p",null,"You haven't created any projects yet",-1)),l(a,{to:"/projects/new",class:"btn btn-primary mt-2"},{default:d(()=>e[3]||(e[3]=[u(" Create Your First Project ")])),_:1})])):(n(),r("div",R,[(n(!0),r(I,null,F(m.value,o=>{var y;return n(),r("div",{key:o._id,class:"project-card"},[s("div",{class:"project-thumbnail",onClick:V=>g(o._id)},[o.videoUrl&&P(o.videoUrl)?(n(),r("img",{key:0,src:k(o.videoUrl),alt:o.name,class:"thumbnail-image"},null,8,q)):(n(),r("div",z,[e[5]||(e[5]=s("span",{class:"material-icons"},"videocam",-1)),o.videoUrl?S("",!0):(n(),r("span",G,"No video"))]))],8,A),s("div",H,[s("h3",J,c(o.name),1),s("span",K,c(D(o.createdAt)),1)]),s("div",O,[s("p",Q,c(L(o.description)),1),s("div",W,[s("span",null,c(((y=o.breakpoints)==null?void 0:y.length)||0)+" breakpoints",1)])]),s("div",X,[l(a,{to:`/projects/${o._id}/view`,class:"btn btn-sm btn-primary",title:"View Project"},{default:d(()=>e[6]||(e[6]=[u(" View ")])),_:2},1032,["to"]),l(a,{to:`/projects/${o._id}/edit`,class:"btn btn-sm btn-success",title:"Edit Project"},{default:d(()=>e[7]||(e[7]=[u(" Edit ")])),_:2},1032,["to"]),s("button",{onClick:V=>w(o),class:"btn btn-sm btn-danger",title:"Delete Project",type:"button"}," Delete ",8,Z)])])}),128))]))])}}},et=f(tt,[["__scopeId","data-v-ff1db51a"]]);const st={class:"projects-view"},ot={__name:"ProjectsView",setup(h){return(i,p)=>(n(),r("div",st,[l(et)]))}},it=f(ot,[["__scopeId","data-v-68532f32"]]);export{it as default};

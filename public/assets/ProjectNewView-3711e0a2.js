import{u as P,i as U,c as g,j as E,a as l,b as n,d as o,t as v,h as m,k as b,v as _,l as N,e as k}from"./index-fe7ef7ff.js";import{_ as h,u as S}from"./_plugin-vue_export-helper-d78e90cf.js";const D={class:"project-form"},I={class:"form-title"},R={key:0,class:"alert alert-danger"},$={class:"form-group"},C=["disabled"],F={class:"form-group"},L=["disabled"],B={key:0,class:"form-group"},Y=["disabled"],T={key:0,class:"video-preview mt-3"},M={class:"video-preview-container"},q=["src"],O={class:"form-actions"},z=["disabled"],A=["disabled"],G={__name:"ProjectForm",props:{project:{type:Object,default:()=>({name:"",description:"",videoUrl:""})},isEditing:{type:Boolean,default:!1}},emits:["save","update","cancel"],setup(d,{emit:p}){const r=d,c=p,f=P(),u=S(),s=U({name:"",description:"",videoUrl:""}),j=U(!1),w=()=>{const t=s.value.videoUrl,e=/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/;j.value=e.test(t)},V=t=>t?t.includes("youtu.be")?`https://www.youtube.com/embed/${t.split("/").pop().split("?")[0]}`:t.includes("youtube.com/watch")?`https://www.youtube.com/embed/${new URL(t).searchParams.get("v")}`:t:"",i=g(()=>u.loading),y=g(()=>u.error);E(()=>r.project,t=>{t&&(s.value={...t},w())},{immediate:!0});const x=async()=>{try{if(r.isEditing)await u.updateProject(r.project.id,{name:s.value.name,description:s.value.description}),c("update",r.project.id);else{const t=await u.addProject({name:s.value.name,description:s.value.description,videoUrl:s.value.videoUrl});c("save",t),t&&t._id&&f.push(`/projects/${t._id}/edit`)}}catch(t){console.error("Failed to save project:",t)}};return(t,e)=>(l(),n("div",D,[o("h1",I,v(d.isEditing?"Edit Project":"New Project"),1),y.value?(l(),n("div",R,v(y.value),1)):m("",!0),o("form",{onSubmit:N(x,["prevent"]),class:"form"},[o("div",$,[e[4]||(e[4]=o("label",{for:"projectName"},"Project Name",-1)),b(o("input",{type:"text",id:"projectName",name:"projectName","onUpdate:modelValue":e[0]||(e[0]=a=>s.value.name=a),class:"form-control",required:"",placeholder:"Enter project name...",disabled:i.value,"aria-label":"Project name"},null,8,C),[[_,s.value.name]])]),o("div",F,[e[5]||(e[5]=o("label",{for:"projectDescription"},"Project Description",-1)),b(o("textarea",{id:"projectDescription",name:"projectDescription","onUpdate:modelValue":e[1]||(e[1]=a=>s.value.description=a),class:"form-control",rows:"4",placeholder:"Enter project description...",disabled:i.value,"aria-label":"Project description"},null,8,L),[[_,s.value.description]])]),d.isEditing?m("",!0):(l(),n("div",B,[e[7]||(e[7]=o("label",{for:"videoUrl"},"Video URL",-1)),b(o("input",{type:"text",id:"videoUrl",name:"videoUrl","onUpdate:modelValue":e[2]||(e[2]=a=>s.value.videoUrl=a),class:"form-control",placeholder:"Enter YouTube video URL or direct video link...",disabled:i.value,"aria-label":"Video URL",onInput:w},null,40,Y),[[_,s.value.videoUrl]]),e[8]||(e[8]=o("small",{class:"form-text text-muted"}," Supports YouTube links or direct video file URLs ",-1)),j.value&&s.value.videoUrl?(l(),n("div",T,[e[6]||(e[6]=o("h4",null,"Video Preview:",-1)),o("div",M,[o("iframe",{src:V(s.value.videoUrl),frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,q)])])):m("",!0)])),o("div",O,[o("button",{type:"button",onClick:e[3]||(e[3]=a=>t.$router.back()),class:"btn btn-secondary",disabled:i.value}," Cancel ",8,z),o("button",{type:"submit",class:"btn btn-primary",disabled:i.value||!s.value.name},v(i.value?"Saving...":d.isEditing?"Save Changes":"Create Project"),9,A)])],32)]))}},H=h(G,[["__scopeId","data-v-46a32e61"]]);const J={class:"project-new-view"},K={__name:"ProjectNewView",setup(d){const p=P(),r=c=>{p.push("/projects")};return(c,f)=>(l(),n("div",J,[k(H,{"is-editing":!1,onSave:r})]))}},X=h(K,[["__scopeId","data-v-08b315db"]]);export{X as default};
